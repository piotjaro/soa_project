<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
    <h:outputStylesheet library="css" name="bootstrap.min.css"/>
    <h:outputScript library="js" name="bootstrap.min.js"/>

</h:head>

<h:body>


    <div class="panel panel-primary">
        <div class="panel-heading">User panel
            <button class="btn btn-default" onclick="location.href = 'hello.xhtml';">Main Page</button>
        </div>

        <div class="panel-body">
            login: <h:outputLabel value="#{remoteEJBClient.user.login}"/><br/>
            debt: <h:outputLabel value="#{remoteEJBClient.user.debt}"/><br/>
            mail: <h:outputLabel value="#{remoteEJBClient.user.mail}"/><br/>
            name: <h:outputLabel value="#{remoteEJBClient.user.name}"/><br/>
            surname: <h:outputLabel value="#{remoteEJBClient.user.surname}"/><br/>
            role: <h:outputLabel value="#{remoteEJBClient.user.role}"/><br/>

            <div id="new">
                <c:forEach items="#{remoteEJBClient.user.actualCarts}" var="cart">
                    <c:choose>
                        <c:when test="#{cart.status == 'New'}">
                            <h:outputLabel value="Date of receipt: #{cart.dateOfReceipt}"/>
                            <h:outputLabel value=", address: #{cart.address}"/>
                            <h:outputLabel value=", total cost: #{cart.cost}"/>
                            <h:outputLabel value=", total cost: #{cart.status}"/>
                            <table class="table table-striped">
                                <ui:repeat value="#{cart.dishes}" var="dish">
                                    <tr>
                                        <td>
                                            <h:outputLabel value="#{dish.name}"/>
                                        </td>
                                    </tr>
                                </ui:repeat>
                            </table>
                            <h:commandButton action="#{remoteEJBClient.cancelCart(user.id, cart.id)}" value="Cancel cart"/>
                        </c:when>
                    </c:choose>
                </c:forEach>
            </div>

        </div>

    </div>


</h:body>


</html>